"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[463],{3839:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"modules/generator-aws-terraform","title":"\u2601\ufe0f AWS Terraform Generator","description":"This module provides a Cloudhopper generator for deploying annotated Java functions as AWS Lambda functions using Terraform.","source":"@site/docs/modules/generator-aws-terraform.md","sourceDirName":"modules","slug":"/modules/generator-aws-terraform","permalink":"/cloudhopper-mc/docs/modules/generator-aws-terraform","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"\u2601\ufe0f Cloud Provider Generator Overview","permalink":"/cloudhopper-mc/docs/platforms/generator-overview"},"next":{"title":"provider-aws","permalink":"/cloudhopper-mc/docs/modules/provider-aws"}}');var s=n(4848),a=n(8453);const d={},o="\u2601\ufe0f AWS Terraform Generator",i={},l=[{value:"\ud83d\udce6 How to Use",id:"-how-to-use",level:2},{value:"1. Add the Maven dependency",id:"1-add-the-maven-dependency",level:3},{value:"2. Configure the annotation processor",id:"2-configure-the-annotation-processor",level:3},{value:"\ud83d\udcc1 Templates",id:"-templates",level:2},{value:"\ud83d\udd0c Template Registration",id:"-template-registration",level:2},{value:"\ud83d\udcc2 Output",id:"-output",level:2},{value:"\ud83d\udee0\ufe0f Notes for Generator Developers",id:"\ufe0f-notes-for-generator-developers",level:2},{value:"\ud83d\udcda Related Modules",id:"-related-modules",level:2}];function c(e){const r={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"\ufe0f-aws-terraform-generator",children:"\u2601\ufe0f AWS Terraform Generator"})}),"\n",(0,s.jsxs)(r.p,{children:["This module provides a Cloudhopper generator for deploying annotated Java functions as ",(0,s.jsx)(r.strong,{children:"AWS Lambda functions"})," using ",(0,s.jsx)(r.strong,{children:"Terraform"}),"."]}),"\n",(0,s.jsx)(r.p,{children:"It generates:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"AWS-specific handler classes"}),"\n",(0,s.jsx)(r.li,{children:"Terraform configuration files"}),"\n",(0,s.jsx)(r.li,{children:"Integration metadata to bridge vendor-neutral logic with AWS infrastructure"}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-how-to-use",children:"\ud83d\udce6 How to Use"}),"\n",(0,s.jsx)(r.p,{children:"To enable this generator in your own project, you need to:"}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"1-add-the-maven-dependency",children:"1. Add the Maven dependency"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-xml",children:"<dependency>\n  <groupId>com.cloudhopper.mc</groupId>\n  <artifactId>generator-aws-terraform</artifactId>\n  <version>${cloudhopper.version}</version>\n</dependency>\n"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"2-configure-the-annotation-processor",children:"2. Configure the annotation processor"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-xml",children:"<plugin>\n  <artifactId>maven-compiler-plugin</artifactId>\n  <version>3.8.1</version>\n  <configuration>\n    <source>17</source>\n    <target>17</target>\n    <encoding>UTF-8</encoding>\n    <annotationProcessors>\n      <annotationProcessor>\n        com.cloudhopper.mc.deployment.config.generator.ServerlessFunctionProcessor\n      </annotationProcessor>\n    </annotationProcessors>\n    <compilerArgs>\n      <arg>-Acloudprovider=aws</arg>\n      <arg>-AgeneratorId=aws-terraform-java21</arg>\n      <arg>-AconfigOutputDir=${project.build.directory}/deployment/aws</arg>\n      <arg>-AtargetDir=${project.build.directory}</arg>\n      <arg>-AartifactId=${project.artifactId}</arg>\n      <arg>-Aversion=${project.version}</arg>\n      <arg>-Aclassifier=aws</arg>\n    </compilerArgs>\n  </configuration>\n</plugin>\n"})}),"\n",(0,s.jsx)(r.p,{children:"This setup enables Cloudhopper to generate AWS-specific Terraform and handler code."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-templates",children:"\ud83d\udcc1 Templates"}),"\n",(0,s.jsx)(r.p,{children:"Templates used by this generator are located under:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"src/main/resources/templates/aws/\n"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Template"}),(0,s.jsx)(r.th,{children:"Output Type"}),(0,s.jsx)(r.th,{children:"Purpose"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"api.ftl"})}),(0,s.jsx)(r.td,{children:"Terraform"}),(0,s.jsx)(r.td,{children:"API Gateway integration resource"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"apiIntegrationClass.ftl"})}),(0,s.jsx)(r.td,{children:"Java"}),(0,s.jsx)(r.td,{children:"API handler implementation"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"function.ftl"})}),(0,s.jsx)(r.td,{children:"Terraform"}),(0,s.jsx)(r.td,{children:"Lambda function resource"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"handler.ftl"})}),(0,s.jsx)(r.td,{children:"Java"}),(0,s.jsxs)(r.td,{children:["Entry class using ",(0,s.jsx)(r.code,{children:"AwsLambdaRequestHandler"})]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"integration.ftl"})}),(0,s.jsx)(r.td,{children:"Terraform"}),(0,s.jsx)(r.td,{children:"API Gateway/Lambda integration resource"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"schedule.ftl"})}),(0,s.jsx)(r.td,{children:"Terraform"}),(0,s.jsx)(r.td,{children:"Scheduled (CloudWatch Event) trigger"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"shared.ftl"})}),(0,s.jsx)(r.td,{children:"Terraform"}),(0,s.jsx)(r.td,{children:"Shared infrastructure (IAM roles, Lambda layer, etc.)"})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-template-registration",children:"\ud83d\udd0c Template Registration"}),"\n",(0,s.jsx)(r.p,{children:"The generator is registered via:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'@TemplateRegistration(\n    generatorId = "aws-terraform-java21",\n    templates = {\n        @Template(name = "handler", phase = GenerationPhase.SOURCES),\n        @Template(name = "apiIntegrationClass", phase = GenerationPhase.SOURCES),\n        @Template(name = "function", phase = GenerationPhase.DEPLOYMENT),\n        @Template(name = "api", phase = GenerationPhase.DEPLOYMENT),\n        @Template(name = "integration", phase = GenerationPhase.DEPLOYMENT),\n        @Template(name = "schedule", phase = GenerationPhase.DEPLOYMENT),\n        @Template(name = "shared", phase = GenerationPhase.DEPLOYMENT)\n    }\n)\npublic class AwsTerraformOpenApiJava21TemplateRegistration { ... }\n'})}),"\n",(0,s.jsx)(r.p,{children:"Cloudhopper uses Java\u2019s ServiceLoader (SPI) mechanism to discover and apply this registration."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-output",children:"\ud83d\udcc2 Output"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Artifact"}),(0,s.jsx)(r.th,{children:"Location"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Java handler classes"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"target/generated-sources/aws/"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Terraform configuration"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"target/deployment/aws/*.tf"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsxs)(r.td,{children:["Metadata (",(0,s.jsx)(r.code,{children:"handler-info.properties"}),")"]}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"target/classes/META-INF/cloudhopper/"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Shaded JAR or ZIP"}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"target/${artifactId}-${version}-aws.jar"})," or ",(0,s.jsx)(r.code,{children:".zip"})]})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-notes-for-generator-developers",children:"\ud83d\udee0\ufe0f Notes for Generator Developers"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Handler classes extend ",(0,s.jsx)(r.code,{children:"AwsLambdaRequestHandler"})," from the ",(0,s.jsx)(r.code,{children:"provider-aws"})," module"]}),"\n",(0,s.jsx)(r.li,{children:"The generated infrastructure assumes the use of Terraform to deploy Lambda, IAM, and API Gateway resources"}),"\n",(0,s.jsxs)(r.li,{children:["You can override templates or inject additional files into the deployment directory by placing them in ",(0,s.jsx)(r.code,{children:"src/main/resources/deployment/aws/"})]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-related-modules",children:"\ud83d\udcda Related Modules"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Module"}),(0,s.jsx)(r.th,{children:"Purpose"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"provider-aws"})}),(0,s.jsxs)(r.td,{children:["Provides the ",(0,s.jsx)(r.code,{children:"AwsLambdaRequestHandler"})," runtime class"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"deployment-config-api"})}),(0,s.jsx)(r.td,{children:"Defines core annotations and function interface"})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.p,{children:["\ud83d\udcdd ",(0,s.jsx)(r.em,{children:"Use this generator if you want to deploy Cloudhopper-based functions to AWS with minimal boilerplate and Terraform-based infrastructure-as-code."})]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>d,x:()=>o});var t=n(6540);const s={},a=t.createContext(s);function d(e){const r=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(a.Provider,{value:r},e.children)}}}]);