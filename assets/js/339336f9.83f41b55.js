"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[169],{6341:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"modules/deployment-config-generator-generic","title":"Generic Deployment Config Generator","description":"This module provides a flexible, template-based generator for Cloudhopper that allows integrators to define deployment configurations using Freemarker templates and simple annotations.","source":"@site/docs/modules/deployment-config-generator-generic.md","sourceDirName":"modules","slug":"/modules/deployment-config-generator-generic","permalink":"/cloudhopper-mc/docs/modules/deployment-config-generator-generic","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Generic Deployment Config Generator"},"sidebar":"documentationSidebar","previous":{"title":"Deployment Config Generator API","permalink":"/cloudhopper-mc/docs/modules/deployment-config-generator-api"}}');var s=t(4848),o=t(8453);const i={title:"Generic Deployment Config Generator"},l="deployment-config-generator-generic",a={},d=[{value:"\ud83d\udca1 Purpose",id:"-purpose",level:2},{value:"\ud83d\udd27 Usage",id:"-usage",level:2},{value:"Example",id:"example",level:3},{value:"\ud83d\udce6 Template Directory Structure",id:"-template-directory-structure",level:2},{value:"\ud83e\udde9 Generation Phases",id:"-generation-phases",level:2},{value:"\u2699\ufe0f Annotations",id:"\ufe0f-annotations",level:2},{value:"\ud83d\udee0 Developer Notes",id:"-developer-notes",level:2},{value:"\ud83d\ude80 Related Modules",id:"-related-modules",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"deployment-config-generator-generic",children:"deployment-config-generator-generic"})}),"\n",(0,s.jsx)(n.p,{children:"This module provides a flexible, template-based generator for Cloudhopper that allows integrators to define deployment configurations using Freemarker templates and simple annotations."}),"\n",(0,s.jsxs)(n.p,{children:["It implements the ",(0,s.jsx)(n.code,{children:"DeploymentConfigGenerator"})," SPI and is used as the default generator for most Cloudhopper setups."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-purpose",children:"\ud83d\udca1 Purpose"}),"\n",(0,s.jsx)(n.p,{children:"This module enables:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Code generation from annotations without writing Java generator logic"}),"\n",(0,s.jsx)(n.li,{children:"Declarative registration of templates for each generation phase"}),"\n",(0,s.jsx)(n.li,{children:"Easy support for multiple providers with different output formats (e.g., Terraform, SAM)"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-usage",children:"\ud83d\udd27 Usage"}),"\n",(0,s.jsxs)(n.p,{children:["To use this generator, create a class annotated with ",(0,s.jsx)(n.code,{children:"@TemplateRegistration"})," and list all templates used by your provider."]}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@TemplateRegistration(\n    generatorId = "aws-terraform-java21",\n    templates = {\n        @Template(\n            phase = GenerationPhase.FUNCTION,\n            templateName = "function",\n            outputFileExtension = "tf",\n            outputSubDirectory = "deployment/aws",\n            description = "Main Lambda function"\n        ),\n        @Template(\n            phase = GenerationPhase.SHARED,\n            templateName = "shared",\n            outputFileExtension = "tf",\n            outputSubDirectory = "deployment/aws",\n            description = "Shared resources like IAM roles"\n        )\n    }\n)\npublic class AwsTerraformJava21TemplateRegistration { }\n'})}),"\n",(0,s.jsx)(n.p,{children:"This tells Cloudhopper to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use the generic generator"}),"\n",(0,s.jsxs)(n.li,{children:["Load templates from ",(0,s.jsx)(n.code,{children:"/templates/aws-terraform-java21/"})]}),"\n",(0,s.jsx)(n.li,{children:"Render those templates into the specified subdirectories"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-template-directory-structure",children:"\ud83d\udce6 Template Directory Structure"}),"\n",(0,s.jsx)(n.p,{children:"Your templates must be available in:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"src/main/resources/templates/<generatorId>/\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"src/main/resources/templates/aws-terraform-java21/\n\u251c\u2500\u2500 function.ftl\n\u251c\u2500\u2500 shared.ftl\n\u251c\u2500\u2500 doc/\n\u2502   \u251c\u2500\u2500 README.md\n\u2502   \u2514\u2500\u2500 doc.index\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can optionally include documentation resources (like generated instructions or Markdown files) in a ",(0,s.jsx)(n.code,{children:"doc/"})," subfolder and list them in ",(0,s.jsx)(n.code,{children:"doc.index"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-generation-phases",children:"\ud83e\udde9 Generation Phases"}),"\n",(0,s.jsx)(n.p,{children:"Each template is associated with a phase:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Phase"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FUNCTION"}),(0,s.jsx)(n.td,{children:"Generates function configuration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"API"}),(0,s.jsx)(n.td,{children:"Generates API gateway definitions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"SCHEDULE"}),(0,s.jsx)(n.td,{children:"Generates scheduled triggers"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FINALIZE"}),(0,s.jsx)(n.td,{children:"Final catch-all step (e.g. root modules)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"SHARED"}),(0,s.jsx)(n.td,{children:"Shared resources used by all functions"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"The generator will call your templates in the correct order based on these phases."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-annotations",children:"\u2699\ufe0f Annotations"}),"\n",(0,s.jsxs)(n.p,{children:["Provided in the package ",(0,s.jsx)(n.code,{children:"com.cloudhopper.mc.generator.generic.annotations"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@TemplateRegistration"})," \u2014 top-level annotation to register a generator and its templates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@Template"})," \u2014 describes a single template file (name, output format, phase)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-developer-notes",children:"\ud83d\udee0 Developer Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The generator uses Freemarker under the hood"}),"\n",(0,s.jsx)(n.li,{children:"You do not need to implement the generator SPI manually \u2014 just annotate your templates"}),"\n",(0,s.jsxs)(n.li,{children:["Supports rendering Java files (",(0,s.jsx)(n.code,{children:"javaFile = true"}),") that are compiled into the final project"]}),"\n",(0,s.jsx)(n.li,{children:"Integrates cleanly with the Cloudhopper annotation processor"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-related-modules",children:"\ud83d\ude80 Related Modules"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deployment-config-generator-api"}),": defines the SPI and phase model"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deployment-config-processor"}),": invokes this generator during annotation processing"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var r=t(6540);const s={},o=r.createContext(s);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);