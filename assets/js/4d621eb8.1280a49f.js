"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3015],{48:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"modules/demo","title":"Demo Project Guide","description":"This module demonstrates how to use Cloudhopper to generate deployment artifacts from annotated Java functions for multiple cloud providers.","source":"@site/docs/modules/demo.md","sourceDirName":"modules","slug":"/modules/demo","permalink":"/cloudhopper-mc/docs/modules/demo","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"Generic Deployment Config Generator","permalink":"/cloudhopper-mc/docs/modules/deployment-config-generator-generic"},"next":{"title":"\u2601\ufe0f Cloud Provider Generator Overview","permalink":"/cloudhopper-mc/docs/platforms/generator-overview"}}');var t=n(4848),i=n(8453);const d={},l="Demo Project Guide",o={},c=[{value:"\ud83d\udd27 Prerequisites",id:"-prerequisites",level:2},{value:"\ud83e\uddf1 Build Tools",id:"-build-tools",level:3},{value:"\ud83d\udee0\ufe0f Terraform",id:"\ufe0f-terraform",level:3},{value:"\u2601\ufe0f Cloud Provider CLIs",id:"\ufe0f-cloud-provider-clis",level:3},{value:"Spring Boot (no Terraform)",id:"spring-boot-no-terraform",level:4},{value:"AWS",id:"aws",level:4},{value:"GCP",id:"gcp",level:4},{value:"Azure",id:"azure",level:4},{value:"Build Instructions",id:"build-instructions",level:2},{value:"Structure and Generated Files",id:"structure-and-generated-files",level:2},{value:"\ud83d\udcc1 <code>target/generated-sources/{generator.id}</code>",id:"-targetgenerated-sourcesgeneratorid",level:3},{value:"\ud83d\udcc1 <code>target/deployment/{generator.id}</code>",id:"-targetdeploymentgeneratorid",level:3},{value:"\ud83d\udcc1 <code>src/main/resources/deployment/{generatorId}</code>",id:"-srcmainresourcesdeploymentgeneratorid",level:3},{value:"Function Examples",id:"function-examples",level:2},{value:"HTTP-triggered function",id:"http-triggered-function",level:3},{value:"Scheduled function",id:"scheduled-function",level:3},{value:"\u2699\ufe0f How Code Generation Works",id:"\ufe0f-how-code-generation-works",level:2},{value:"\ud83e\udde9 Annotation Processor Setup",id:"-annotation-processor-setup",level:3},{value:"\ud83d\udcc1 Where the Templates Are",id:"-where-the-templates-are",level:3},{value:"\ud83e\uddf7 Template Registration",id:"-template-registration",level:3},{value:"\ud83d\udcc2 Output Structure",id:"-output-structure",level:3},{value:"Output Artifacts",id:"output-artifacts",level:2},{value:"Terraform Integration",id:"terraform-integration",level:2}];function a(e){const r={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"demo-project-guide",children:"Demo Project Guide"})}),"\n",(0,t.jsxs)(r.p,{children:["This module demonstrates how to use Cloudhopper to generate deployment artifacts from annotated Java functions for multiple cloud providers.\nIt supports AWS, GCP, and Azure via Maven profiles and includes examples for both HTTP-triggered and scheduled functions.\nPlease note that there are some properties in the pom.xml that need to be changed if you want to use the terraform tasks. Those are described in the section on ",(0,t.jsx)(r.strong,{children:"Terraform Integration"}),"."]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"-prerequisites",children:"\ud83d\udd27 Prerequisites"}),"\n",(0,t.jsxs)(r.p,{children:["Before you can build and deploy the demo project, make sure the following tools are installed and available in your ",(0,t.jsx)(r.code,{children:"PATH"}),"."]}),"\n",(0,t.jsx)(r.h3,{id:"-build-tools",children:"\ud83e\uddf1 Build Tools"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Tool"}),(0,t.jsx)(r.th,{children:"Required Version"}),(0,t.jsx)(r.th,{children:"Notes"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"JDK"})}),(0,t.jsx)(r.td,{children:"17 or later"}),(0,t.jsxs)(r.td,{children:["Ensure ",(0,t.jsx)(r.code,{children:"java -version"})," points to a compatible JDK"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Maven"})}),(0,t.jsx)(r.td,{children:"3.8 or later"}),(0,t.jsx)(r.td,{children:"Used to compile, run annotation processors, and package deployments"})]})]})]}),"\n",(0,t.jsx)(r.p,{children:"To verify:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"java -version\nmvn -v\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"\ufe0f-terraform",children:"\ud83d\udee0\ufe0f Terraform"}),"\n",(0,t.jsx)(r.p,{children:"Terraform is used to apply the generated infrastructure configuration."}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Tool"}),(0,t.jsx)(r.th,{children:"Required Version"}),(0,t.jsx)(r.th,{children:"Notes"})]})}),(0,t.jsx)(r.tbody,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Terraform"})}),(0,t.jsx)(r.td,{children:"1.3 or later"}),(0,t.jsxs)(r.td,{children:["Specified via ",(0,t.jsx)(r.code,{children:"terraform.executable"})," in the ",(0,t.jsx)(r.code,{children:"pom.xml"})]})]})})]}),"\n",(0,t.jsx)(r.p,{children:"To verify:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"terraform version\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"\ufe0f-cloud-provider-clis",children:"\u2601\ufe0f Cloud Provider CLIs"}),"\n",(0,t.jsx)(r.p,{children:"Depending on the active Maven profile, you\u2019ll need CLI tools for the cloud provider (or project type) you\u2019re targeting:"}),"\n",(0,t.jsx)(r.h4,{id:"spring-boot-no-terraform",children:"Spring Boot (no Terraform)"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"mvn clean install -Pspringboot\n"})}),"\n",(0,t.jsx)(r.p,{children:"This generates a simple springboot project."}),"\n",(0,t.jsx)(r.h4,{id:"aws",children:"AWS"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Install the ",(0,t.jsx)(r.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html",children:"AWS CLI v2"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Authenticate via:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"aws configure\n"})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Terraform uses the ",(0,t.jsx)(r.code,{children:"AWS_PROFILE"})," environment variable (e.g. ",(0,t.jsx)(r.code,{children:"dukehoff"}),") defined in the Maven plugin execution."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"gcp",children:"GCP"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Install the ",(0,t.jsx)(r.a,{href:"https://cloud.google.com/sdk/docs/install",children:"Google Cloud CLI"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Authenticate via:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"gcloud auth login\ngcloud config set project your-project-id\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"azure",children:"Azure"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Install the ",(0,t.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/cli/azure/install-azure-cli",children:"Azure CLI"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Authenticate via:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"az login\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsxs)(r.p,{children:["\ud83d\udca1 You can define custom paths to Terraform and CLI tools via properties in the ",(0,t.jsx)(r.code,{children:"pom.xml"}),", such as:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:"<terraform.executable>/opt/homebrew/bin/terraform</terraform.executable>\n<path.extras>/opt/homebrew/bin/</path.extras>\n"})}),"\n",(0,t.jsx)(r.p,{children:"This ensures compatibility with local setups like Homebrew on macOS."}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"build-instructions",children:"Build Instructions"}),"\n",(0,t.jsx)(r.p,{children:"To compile the project and run the annotation processor:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"mvn clean install -Paws\n"})}),"\n",(0,t.jsx)(r.p,{children:"You can switch providers using:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"mvn clean install -Pgcp\nmvn clean install -Pazure\nmvn clean install -Pspringboot\n"})}),"\n",(0,t.jsx)(r.p,{children:"Generated resources will be placed in the following directories based on the active profile:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Profile"}),(0,t.jsx)(r.th,{children:"Cloud Provider"}),(0,t.jsx)(r.th,{children:"Generated Sources"}),(0,t.jsx)(r.th,{children:"Deployment Output"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"aws"})}),(0,t.jsx)(r.td,{children:"AWS Lambda"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"target/generated-sources/aws-terraform"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"target/deployment/aws-terraform"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"gcp"})}),(0,t.jsx)(r.td,{children:"GCP Functions"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"target/generated-sources/gcp-terraform"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"target/deployment/gcp-terraform"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"azure"})}),(0,t.jsx)(r.td,{children:"Azure Functions"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"target/generated-sources/azure-terraform"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"target/deployment/azure-terraform"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"springboot"})}),(0,t.jsx)(r.td,{children:"None/local"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"target/generated-sources/springboot-http"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"target/deployment/springboot-http"})})]})]})]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"structure-and-generated-files",children:"Structure and Generated Files"}),"\n",(0,t.jsxs)(r.h3,{id:"-targetgenerated-sourcesgeneratorid",children:["\ud83d\udcc1 ",(0,t.jsx)(r.code,{children:"target/generated-sources/{generator.id}"})]}),"\n",(0,t.jsxs)(r.p,{children:["Contains provider-specific ",(0,t.jsx)(r.strong,{children:"function handlers"})," that delegate to your annotated classes. Example (AWS):"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"target/generated-sources/aws-terraform/com/cloudhopper/mc/demo/\n  \u251c\u2500\u2500 AwsLambdaApiFunctionHandler.java\n  \u2514\u2500\u2500 AwsLambdaScheduledFunctionHandler.java\n"})}),"\n",(0,t.jsx)(r.p,{children:"These are compiled and included in the shaded JAR for deployment."}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsxs)(r.h3,{id:"-targetdeploymentgeneratorid",children:["\ud83d\udcc1 ",(0,t.jsx)(r.code,{children:"target/deployment/{generator.id}"})]}),"\n",(0,t.jsx)(r.p,{children:"Contains:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"main.tf"})," and related Terraform resources (",(0,t.jsx)(r.code,{children:"*.tf"}),")"]}),"\n",(0,t.jsxs)(r.li,{children:["Cloudhopper metadata (",(0,t.jsx)(r.code,{children:"handler-info.properties"}),")"]}),"\n",(0,t.jsxs)(r.li,{children:["Any user-defined ",(0,t.jsx)(r.code,{children:".tf"})," files copied from ",(0,t.jsx)(r.code,{children:"src/main/resources/deployment/{generator.id}"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Example (AWS):"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"target/deployment/aws-terraform/\n  \u251c\u2500\u2500 api.tf\n  \u251c\u2500\u2500 hello_world_2.tf\n  \u251c\u2500\u2500 scheduledfunction.tf\n  \u251c\u2500\u2500 shared-resources.tf\n  \u251c\u2500\u2500 main.tf\n  \u2514\u2500\u2500 META-INF/handler-info.properties\n"})}),"\n",(0,t.jsx)(r.p,{children:"These files are used by the Terraform CLI to deploy your function stack."}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsxs)(r.h3,{id:"-srcmainresourcesdeploymentgeneratorid",children:["\ud83d\udcc1 ",(0,t.jsx)(r.code,{children:"src/main/resources/deployment/{generatorId}"})]}),"\n",(0,t.jsxs)(r.p,{children:["Optional folder where you can place ",(0,t.jsx)(r.strong,{children:"manually created resources"}),". Its content is copied into the corresponding ",(0,t.jsx)(r.code,{children:"target/deployment/{generatorID}"})," folder at build time."]}),"\n",(0,t.jsx)(r.p,{children:"Use this to:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Add your own ",(0,t.jsx)(r.code,{children:"*.tf"})," files"]}),"\n",(0,t.jsx)(r.li,{children:"Include helper scripts or documentation"}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"function-examples",children:"Function Examples"}),"\n",(0,t.jsx)(r.h3,{id:"http-triggered-function",children:"HTTP-triggered function"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'public class ApiFunction implements CloudRequestHandler<Integer, String> {\n\n    @Function(name = "hello_world_2")\n    @ApiOperation(\n        operationId = "helloworld2",\n        method = "GET",\n        path = "/hello2/{id}",\n        summary = "bla",\n        description = "dummy description"\n    )\n    @Override\n    public String handleRequest(Integer input, HandlerContext context) {\n        throw new UnsupportedOperationException("Not supported yet.");\n    }\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"scheduled-function",children:"Scheduled function"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'public class ScheduledFunction implements CloudRequestHandler<Integer, String> {\n\n    @Function(name = "ScheduledFunction")\n    @Schedule(cron = "0 2 * * *")\n    @Override\n    public String handleRequest(Integer input, HandlerContext context) {\n        return "Hello";\n    }\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"\ufe0f-how-code-generation-works",children:"\u2699\ufe0f How Code Generation Works"}),"\n",(0,t.jsxs)(r.p,{children:["Cloudhopper uses annotation processors at ",(0,t.jsx)(r.strong,{children:"build time"})," to scan your Java classes for specific annotations (e.g. ",(0,t.jsx)(r.code,{children:"@Function"}),", ",(0,t.jsx)(r.code,{children:"@Schedule"}),") and generate deployment metadata using pre-defined ",(0,t.jsx)(r.strong,{children:"Freemarker templates"}),"."]}),"\n",(0,t.jsx)(r.h3,{id:"-annotation-processor-setup",children:"\ud83e\udde9 Annotation Processor Setup"}),"\n",(0,t.jsx)(r.p,{children:"The annotation processor is registered via:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:"<annotationProcessor>\n  eu.cloudhopper.mc.deployment.config.generator.ServerlessFunctionProcessor\n</annotationProcessor>\n"})}),"\n",(0,t.jsxs)(r.p,{children:["This processor is triggered automatically by the Maven Compiler Plugin during the ",(0,t.jsx)(r.code,{children:"compile"})," phase. It reads:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Java annotations such as ",(0,t.jsx)(r.code,{children:"@Function"}),", ",(0,t.jsx)(r.code,{children:"@Schedule"})]}),"\n",(0,t.jsxs)(r.li,{children:["Compile-time parameters (e.g. ",(0,t.jsx)(r.code,{children:"cloudprovider"}),", ",(0,t.jsx)(r.code,{children:"generatorId"}),", ",(0,t.jsx)(r.code,{children:"targetDir"}),")"]}),"\n",(0,t.jsx)(r.li,{children:"Project metadata (e.g. artifact ID, version)"}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Based on these, it looks up the correct ",(0,t.jsx)(r.strong,{children:"template set"})," and generates the following:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Cloud-specific handler Java classes"}),"\n",(0,t.jsxs)(r.li,{children:["Terraform ",(0,t.jsx)(r.code,{children:".tf"})," deployment scripts"]}),"\n",(0,t.jsxs)(r.li,{children:["Metadata files in ",(0,t.jsx)(r.code,{children:"META-INF/"})]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"-where-the-templates-are",children:"\ud83d\udcc1 Where the Templates Are"}),"\n",(0,t.jsx)(r.p,{children:"Templates are organized by cloud provider in their respective generator modules:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Module"}),(0,t.jsx)(r.th,{children:"Location"}),(0,t.jsx)(r.th,{children:"Notes"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"generator-aws-terraform"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"src/main/resources/templates/aws-terraform/"})}),(0,t.jsx)(r.td,{children:"Terraform and AWS Lambda integration templates"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"generator-gcp-terraform"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"src/main/resources/templates/gcp-terraform/"})}),(0,t.jsx)(r.td,{children:"Templates for GCP Cloud Functions"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"generator-azure-terraform"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"src/main/resources/templates/azure-terraform/"})}),(0,t.jsx)(r.td,{children:"Templates for Azure Functions and resources"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"springboot-http"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"src/main/resources/templates/springboot-http/"})}),(0,t.jsx)(r.td,{children:"Templates for SpringBoot"})]})]})]}),"\n",(0,t.jsx)(r.p,{children:"Each folder contains files like:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"function.ftl"})," \u2014 per-function deployment definition"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"schedule.ftl"})," \u2014 scheduled trigger definition"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"handler.ftl"})," \u2014 Java wrapper class"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"shared.ftl"})," \u2014 common infrastructure"]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"-template-registration",children:"\ud83e\uddf7 Template Registration"}),"\n",(0,t.jsxs)(r.p,{children:["Each generator module includes a ",(0,t.jsx)(r.code,{children:"TemplateRegistration"})," class, which registers all the templates and features exposed by that provider."]}),"\n",(0,t.jsx)(r.p,{children:"Examples:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"generator-gcp-terraform"}),(0,t.jsx)(r.br,{}),"\n","\u2192 ",(0,t.jsx)(r.code,{children:"GcpTerraformJava21TemplateRegistration"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"generator-aws-terraform"}),(0,t.jsx)(r.br,{}),"\n","\u2192 ",(0,t.jsx)(r.code,{children:"AwsTerraformJava21TemplateRegistration"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"generator-azure-terraform"}),(0,t.jsx)(r.br,{}),"\n","\u2192 ",(0,t.jsx)(r.code,{children:"AzureTerraformJava21TemplateRegistration"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["These classes are auto-discovered via the standard ",(0,t.jsx)(r.code,{children:"META-INF/services/..."})," SPI mechanism and used by the processor to:"]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Load available templates"}),"\n",(0,t.jsx)(r.li,{children:"Register feature support (e.g., schedules, API integration)"}),"\n",(0,t.jsx)(r.li,{children:"Apply provider-specific options if needed"}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"-output-structure",children:"\ud83d\udcc2 Output Structure"}),"\n",(0,t.jsx)(r.p,{children:"The templates are rendered and written to:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Java handlers:",(0,t.jsx)(r.br,{}),"\n",(0,t.jsx)(r.code,{children:"target/generated-sources/{provider}"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Terraform config & metadata:",(0,t.jsx)(r.br,{}),"\n",(0,t.jsx)(r.code,{children:"target/deployment/{generator.id}"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"This allows you to inspect or customize any generated artifact before deploying."}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"output-artifacts",children:"Output Artifacts"}),"\n",(0,t.jsx)(r.p,{children:"After running the build, the following artifacts are created:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Shaded JAR"})," with all function classes and generated handlers:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"target/demo-1.0-SNAPSHOT-{provider}.jar\n"})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Terraform deployment bundle"})," (when using GCP/Azure ZIP packaging):"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"target/demo-1.0-SNAPSHOT-{provider}.zip\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"terraform-integration",children:"Terraform Integration"}),"\n",(0,t.jsx)(r.p,{children:"Terraform initialization and planning can be done automatically using the 'deploy-with-terraform' profile.\nIt uses the exec-maven-plugin to run terraform:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:"<plugin>\n  <artifactId>exec-maven-plugin</artifactId>\n  <executions>\n    <execution>\n      <id>terraform-init</id>\n      <phase>verify</phase>\n      ...\n    </execution>\n    <execution>\n      <id>terraform-plan</id>\n      <phase>verify</phase>\n      ...\n    </execution>\n  </executions>\n</plugin>\n"})}),"\n",(0,t.jsx)(r.p,{children:"Please note that in order to succeed you will have to adjust some properties in the pom.xml specifying the path and the terraform executable in the properties section.\nYou will also need to adjust the value of AWS_PROFILE."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"<properties>\n    ...\n    <terraform.executable>/opt/homebrew/bin/terraform</terraform.executable>\n    <path.extras>/opt/homebrew/bin/</path.extras>\n</properties>\n"})}),"\n",(0,t.jsx)(r.p,{children:"Alternatively you can run Terraform manually in the output directory as well:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cd target/deployment/aws-terraform\nterraform apply\n"})}),"\n",(0,t.jsx)(r.hr,{})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);