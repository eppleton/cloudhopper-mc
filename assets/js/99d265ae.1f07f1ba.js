"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6438],{6534:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"modules/maven-archetype","title":"Cloudhopper Maven Archetype","description":"The easiest way to get started is the Maven Archetype. It generates a minimal","source":"@site/docs/modules/maven-archetype.md","sourceDirName":"modules","slug":"/modules/maven-archetype","permalink":"/cloudhopper-mc/docs/modules/maven-archetype","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"\ud83d\ude80 Deploy Your First Cloud Function in 5 Minutes","permalink":"/cloudhopper-mc/docs/guides/quickstart"},"next":{"title":"\ud83d\udee0 AWS Setup Guide","permalink":"/cloudhopper-mc/docs/setup/aws-prerequisites"}}');var o=t(4848),a=t(8453);const i={},c="Cloudhopper Maven Archetype",s={},l=[{value:"\ud83d\ude80 Features",id:"-features",level:2},{value:"\ud83d\udee0 Usage",id:"-usage",level:2},{value:"\ud83d\udce6 Interactive (with prompts)",id:"-interactive-with-prompts",level:3},{value:"\u2699\ufe0f Non-interactive (fully scripted)",id:"\ufe0f-non-interactive-fully-scripted",level:3},{value:"\ud83e\udde9 Supported Generators",id:"-supported-generators",level:2},{value:"\ud83e\uddea Terraform Support",id:"-terraform-support",level:2},{value:"\ud83d\udccb Project Layout",id:"-project-layout",level:2},{value:"\ud83c\udfd7\ufe0f Build the project",id:"\ufe0f-build-the-project",level:2},{value:"Deploy with Terraform",id:"deploy-with-terraform",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"cloudhopper-maven-archetype",children:"Cloudhopper Maven Archetype"})}),"\n",(0,o.jsx)(r.p,{children:"The easiest way to get started is the Maven Archetype. It generates a minimal\nCloudhopper-based function project that can be deployed to various cloud providers\nusing our provider-specific generators."}),"\n",(0,o.jsx)(r.h2,{id:"-features",children:"\ud83d\ude80 Features"}),"\n",(0,o.jsx)(r.p,{children:'The Archetype creates a simple "Hello World!" function using cloudhopper annotations.\nUsing commandline parameters you can configure where you want to deploy the function, or more accurately, what generator you want to use.\nIf you want to use Maven to deploy your functions, the archetype can optionally add a Terraform-based deployment profile.'}),"\n",(0,o.jsx)(r.h2,{id:"-usage",children:"\ud83d\udee0 Usage"}),"\n",(0,o.jsx)(r.h3,{id:"-interactive-with-prompts",children:"\ud83d\udce6 Interactive (with prompts)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-sh",children:"    mvn archetype:generate \\\n      -DarchetypeGroupId=eu.cloudhopper.mc \\\n      -DarchetypeArtifactId=cloudhopper-maven-archetype-core \\\n      -DarchetypeVersion=1.0-SNAPSHOT\n"})}),"\n",(0,o.jsx)(r.h3,{id:"\ufe0f-non-interactive-fully-scripted",children:"\u2699\ufe0f Non-interactive (fully scripted)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-sh",children:"    mvn archetype:generate \\\n      -DarchetypeGroupId=eu.cloudhopper.mc \\\n      -DarchetypeArtifactId=cloudhopper-maven-archetype-core \\\n      -DarchetypeVersion=1.0-SNAPSHOT \\\n      -DgroupId=com.example \\\n      -DartifactId=my-function \\\n      -Dversion=1.0-SNAPSHOT \\\n      -Dpackage=com.example.fn \\\n      -DgeneratorIds=aws-terraform,gcp-terraform \\\n      -DincludeTerraformProfile=true \\\n      -B\n\n> `-B` enables batch mode (non-interactive)\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-supported-generators",children:"\ud83e\udde9 Supported Generators"}),"\n",(0,o.jsxs)(r.p,{children:["You can specify one or more ",(0,o.jsx)(r.code,{children:"generatorIds"})," (comma-separated) to activate support for the following providers:"]}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Generator ID"}),(0,o.jsx)(r.th,{children:"Description"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"aws-terraform"})}),(0,o.jsx)(r.td,{children:"AWS Lambda via Terraform"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"gcp-terraform"})}),(0,o.jsx)(r.td,{children:"GCP Cloud Functions via Terraform"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"azure-terraform"})}),(0,o.jsx)(r.td,{children:"Azure Functions via Terraform"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"springboot-http"})}),(0,o.jsx)(r.td,{children:"Local Spring Boot HTTP runtime"})]})]})]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-terraform-support",children:"\ud83e\uddea Terraform Support"}),"\n",(0,o.jsxs)(r.p,{children:["If ",(0,o.jsx)(r.code,{children:"includeTerraformProfile=true"}),", the generated project will include a ",(0,o.jsx)(r.code,{children:"deploy-with-terraform"})," Maven profile that executes:"]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"terraform init"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"terraform plan"})}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"terraform apply"})," / ",(0,o.jsx)(r.code,{children:"destroy"})]}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"Customize the Terraform executable path and environment using project properties:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:"    <properties>\n      <terraform.executable>terraform</terraform.executable>\n      <path.extras>/usr/local/bin</path.extras>\n    </properties>\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"-project-layout",children:"\ud83d\udccb Project Layout"}),"\n",(0,o.jsx)(r.p,{children:"The generated project looks like this:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"my-function\n\u251c\u2500\u2500 pom.xml\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 main\n        \u251c\u2500\u2500 java\n        \u2502\xa0\xa0 \u2514\u2500\u2500 com\n        \u2502\xa0\xa0     \u2514\u2500\u2500 example\n        \u2502\xa0\xa0         \u2514\u2500\u2500 fn\n        \u2502\xa0\xa0             \u2514\u2500\u2500 HelloFunction.java  // The sample function\n        \u2514\u2500\u2500 resources\n            \u2514\u2500\u2500 deployment                      // files will be copied to target/deployment/...\n                \u251c\u2500\u2500 aws-terraform               // optional, only for generator aws-terraform\n                \u2502\xa0\xa0 \u2514\u2500\u2500 main.tf                 // customize to provide credentials, etc. \n                \u251c\u2500\u2500 azure-terraform             // optional, only for generator azure-terraform\n                \u2502\xa0\xa0 \u2514\u2500\u2500 main.tf                 // customize to provide credentials, etc. \n                \u2514\u2500\u2500 gcp-terraform               // optional, only for generator gcp-terraform)\n                    \u251c\u2500\u2500 gcp.auto.tfvars         // customize to provide service account, etc.\n                    \u2514\u2500\u2500 main.tf                 // customize to provide credentials, etc. \n"})}),"\n",(0,o.jsx)(r.h2,{id:"\ufe0f-build-the-project",children:"\ud83c\udfd7\ufe0f Build the project"}),"\n",(0,o.jsx)(r.p,{children:"For each of the generatorIds specified, a profile is created in the pom that can be used to build the project and generate\nfor the specified platform and generate the boilerplate needed for deployment."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# build with generator aws-terraform\nmvn clean install -Paws-terraform\n# build with generator gcp-terraform\nmvn clean install -Pgcp-terraform\n# build with generator azure-terraform\nmvn clean install -Pazure-terraform\n# build with generator springboot-http\nmvn clean install -Pspringboot-http\n"})}),"\n",(0,o.jsxs)(r.p,{children:["The annotation processor generates integration classes. The deployment files, (for aws, gcp and azure),\nwill be generated into a directory in target/deployment/",(0,o.jsx)(r.code,{children:"{generatorId}"}),". You can import those files along with\nthe generated function JAR in your own terraform project, or use terraform directly from the generated directory."]}),"\n",(0,o.jsx)(r.p,{children:"You need to provide additional variables for the deployment. Please check the generator documentation for details."}),"\n",(0,o.jsx)(r.h2,{id:"deploy-with-terraform",children:"Deploy with Terraform"}),"\n",(0,o.jsxs)(r.p,{children:["If the generator is terraform based, the .tf files are generated in target/deployment/",(0,o.jsx)(r.code,{children:"{generatorId}"}),".\nYou can copy the generated files to your terraform modules and use them from there.\nFor smaller projects or for testing you can use the generated maven profile ",(0,o.jsx)(r.a,{href:"#terraform-support",children:"see here"}),". Make sure to provide\nthe path to your terraform executable in the pom's properties:"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:"    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <cloudhopper.version>1.0-SNAPSHOT</cloudhopper.version>\n        \x3c!-- add the path to your terraform executable here --\x3e\n        <terraform.executable>terraform</terraform.executable>\n        <path.extras></path.extras>\n    </properties>\n"})}),"\n",(0,o.jsx)(r.p,{children:"The maven profile is configured to always run terraform init. A second command can be passed via a parameter:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"mvn verify -Pdeploy-with-terraform -Dterraform.command=plan\nmvn verify -Pdeploy-with-terraform -Dterraform.command=apply\nmvn verify -Pdeploy-with-terraform -Dterraform.command=delete\n"})})]})}function p(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>c});var n=t(6540);const o={},a=n.createContext(o);function i(e){const r=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(a.Provider,{value:r},e.children)}}}]);